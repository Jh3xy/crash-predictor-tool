/* =========================================================================
   5. RESPONSIVENESS & MEDIA QUERIES (DESKTOP OVERRIDES)
   ========================================================================= */

/* --- A. TABLET / Desktop (min-width: 769px) --- */
@media (min-width: 961px) {
    
    /* 1. DASHBOARD LAYOUT: Switch to Desktop 2-column Grid */
    .dashboard {
        grid-template-columns: 250px 1fr; 
        height: 100vh;
        overflow-y: hidden;
    }

    /* 2. HEADER: Spans only the main content area */
    header {
        grid-column: 2 / 3;
    }
    
    /* 3. SIDEBAR: Always visible and pinned to the left */
    .sidebar {
        grid-row: 1 / 3;
        grid-column: 1 / 2;
        position: sticky;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 10;
        transition: none; 
    }
    
    /* Hide the mobile menu items and reset sidebar footer position */
    #menu-toggle,
    .sidebar-backdrop {
        display: none !important;
    }
    .sidebar-footer{
        position: absolute; 
        bottom: 0;
        padding: 1rem;
        width: 85%;
    }

    /* 4. MAIN CONTENT: Fills the content area */
    .dashboard-overview {
        grid-column: 2 / 3;
        overflow-y: auto;
        height: 100%;
        padding: 1.5rem; 
        padding-right: 0.5rem;
        padding-top: 1.5rem;
    }

    /* 5. CARD LAYOUT: Start 2-column grid for cards */
    .cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 1.5rem;
    }
    
    /* Stats Cards: Ensure 4-column flow */
    .stats-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        padding: 10px;
    }
    .stat-item {
        margin-bottom: 0; /* Remove extra margin for desktop */
    }
    
    /* Full-width elements span all columns */
    .full-width {
        grid-column: 1 / -1;
    }

    /* 6. STATS GRID: Predictor stats layout */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); 
        grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
        gap: var(--spacing-small);
    }
    .stat-item.full-column-width {
        grid-column: span 3;
    }

    /* 7. HISTORY TABLE: Re-introduce all 5 columns */
    .table-content > *,
    .table-header > *{
        padding-right: 1.5rem;
    }

    .tag span{
        display: block;
    }
}

@media (max-width: 960px){
    .table-header,
    .log-row {
        grid-template-columns: 2fr 1fr 1fr 1fr; 
        font-size: 0.82rem;
        
    }

    .table-header h4:nth-child(4),
    .log-row div:nth-child(4){
        display: none;
        justify-self: center;
    }
}

/* --- B. LARGE DESKTOP (min-width: 1201px) --- */
@media (min-width: 1201px) {
    /* 1. LAYOUT ADJUSTMENTS for Max Width */
    .wrap {
        max-width: 1800px;
    }

    /* 2. CARD LAYOUT: Optimize for structured multi-column view */
    .cards {
        /* Define named areas for complex layout */
        grid-template-columns: 1fr 1fr; 
        grid-template-areas:
            "live-sync live-sync"  
            "predictor predictor" 
            "verifier stats-cards" 
            "history history"; 
        gap: 2rem;
    }

    /* Map card IDs to grid areas (Requires setting IDs in HTML) */
    #live-sync { grid-area: live-sync; }
    #ai-predictor { grid-area: predictor; }
    #crash-verfier { grid-area: verifier; }
    .stats-cards { 
        grid-area: stats-cards;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
     }
    #history { grid-area: history; }

    /* The 'full-width' class is now superseded by grid-area for these main cards */
    .full-width {
        grid-column: unset; 
    }
    
    /* Adjustments for the history/table area */
    #history {
        grid-column: 1 / -1; 
    }
}